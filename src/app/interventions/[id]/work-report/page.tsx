"use client"; import { useRouter } from 'next/navigation'; import { WorkReportForm, WorkReportFormValues } from '@/components/work-report-form'; import { useInterventionRequests } from '@/context/intervention-context'; import { Toaster } from '@/components/ui/sonner'; import type { InterventionRequest } from '@/types/intervention'; interface WrapperProps { intervention: InterventionRequest; } export function WorkReportFormWrapper({ intervention }: WrapperProps) { const router = useRouter(); const { updateInterventionRequest } = useInterventionRequests(); const handleSubmit = async (data: WorkReportFormValues) => { const { status, ...workReportDataFields } = data; await updateInterventionRequest({ ...intervention, work_report_data: workReportDataFields, status, }); router.push('/interventions'); }; return ( <> <WorkReportForm initialData={{ ...(intervention.work_report_data ?? {}) }} onSubmit={handleSubmit} clientName={intervention.client_company_name} currentStatus={intervention.status} /> <Toaster /> </> ); }